<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ObjectPool</title>
</head>
<body>
    <header>
        <div class="container">
            <li><a href="../UnityEngine.html">UnrealEngine</a></li>
        </div>
    </header>
    <footer>
        <div class="container">
            <p>[System.Serializable]                                             </p>
            <p>public class ObjectInfo</p>
            <p>{</p>
            <p>    public GameObject goPrefab;</p>
            <p>    public int count;</p>
            <p>    public Transform tfPoolParent;</p>
            <p>}</p>
            <p></p>
            <p>public class ObjectPool : MonoBehaviour</p>
            <p>{</p>
            <p>    public static ObjectPool Instance { get; private set; }</p>
            <p>    </p>
            <p>    public ObjectInfo[] objectInfo = null;</p>
            <p>    public Queue<GameObject> _Queue = new Queue<GameObject>();</p>
            <p></p>
            <p>    private void Awake()</p>
            <p>    {</p>
            <p>        Instance = this;</p>
            <p>    }</p>
            <p></p>
            <p>    private void Start()                        </p>
            <p>    {</p>
            <p>        _Queue = InsertQueue(objectInfo[0]);</p>
            <p>    }</p>
            <p></p>
            <p>    Queue<GameObject> InsertQueue(ObjectInfo p_objectInfo)</p>
            <p>    {</p>
            <p>        Queue<GameObject> t_queue = new Queue<GameObject>();</p>
            <p>        for(int i = 0; i < p_objectInfo.count; i++)</p>
            <p>        {</p>
            <p>            GameObject t_clone = Instantiate(p_objectInfo.goPrefab, transform.position, Quaternion.identity);</p>
            <p>            t_clone.SetActive(false);</p>
            <p>            if(p_objectInfo.tfPoolParent != null)</p>
            <p>            {</p>
            <p>                t_clone.transform.SetParent(p_objectInfo.tfPoolParent);</p>
            <p>            }</p>
            <p>            else</p>
            <p>            {</p>
            <p>                t_clone.transform.SetParent(this.transform);</p>
            <p>            }</p>
            <p>            t_queue.Enqueue(t_clone);</p>
            <p>        }</p>
            <p></p>
            <p>        return t_queue;</p>
            <p>    }</p>
            <p>}</p>
        </div>
    </footer>
</body>
</html>